{"mappings":"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","sources":["<anon>","src/scripts/main.js","src/modules/Game.class.js","src/constants/game.config.js"],"sourcesContent":["const $19cfdf636c062450$export$23a7ffc9cfbefc05 = 4;\nconst $19cfdf636c062450$export$8ae71851ce4167cd = 2;\nconst $19cfdf636c062450$export$df1fa4711fa5f9ac = 2;\nconst $19cfdf636c062450$export$c80850304c13fa10 = 2;\nconst $19cfdf636c062450$export$995d27d226b8d92c = 2048;\nconst $19cfdf636c062450$export$6ea81d70350bed43 = [\n    [\n        0,\n        0,\n        0,\n        0\n    ],\n    [\n        0,\n        0,\n        0,\n        0\n    ],\n    [\n        0,\n        0,\n        0,\n        0\n    ],\n    [\n        0,\n        0,\n        0,\n        0\n    ]\n];\n\n\n\"use strict\";\nclass $a5fd07fa01589658$var$Game {\n    constructor(initialState = (0, $19cfdf636c062450$export$6ea81d70350bed43)){\n        this.board = initialState;\n        this.score = 0;\n        this.newTile = null;\n        this.mergedTiles = [];\n        this.field = document.querySelector(\".game-field\");\n        if (!this.field) throw new Error(\"\\u041D\\u0435 \\u0437\\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E \\u0435\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442 .game-field \\u0432 DOM!\");\n        this.initBoard();\n        this.renderBoard();\n    }\n    filterZero(row) {\n        return row.filter((num)=>num !== 0);\n    }\n    initBoard() {\n        this.cells = [];\n        this.field.innerHTML = \"\";\n        for(let row = 0; row < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05); row++){\n            this.cells[row] = [];\n            for(let col = 0; col < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05); col++){\n                const cell = document.createElement(\"div\");\n                cell.classList.add(\"field-cell\");\n                this.field.appendChild(cell);\n                this.cells[row][col] = cell;\n            }\n        }\n    }\n    renderBoard() {\n        for(let row = 0; row < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05); row++)for(let col = 0; col < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05); col++){\n            const cell = this.cells[row][col];\n            const value = this.board[row][col];\n            cell.textContent = value || \"\";\n            cell.className = `field-cell${value ? ` field-cell--${value}` : \"\"}`;\n            if (this.newTile && this.newTile.row === row && this.newTile.col === col) {\n                cell.classList.add(\"field-cell--new\");\n                cell.addEventListener(\"animationend\", ()=>cell.classList.remove(\"field-cell--new\"), {\n                    once: true\n                });\n            }\n        }\n        const scoreEl = document.querySelector(\".game-score\");\n        if (scoreEl) scoreEl.textContent = String(this.score);\n    }\n    spawnNumber() {\n        const emptyCells = [];\n        for(let row = 0; row < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05); row++){\n            for(let col = 0; col < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05); col++)if (this.board[row][col] === 0) emptyCells.push({\n                row: row,\n                col: col\n            });\n        }\n        if (emptyCells.length === 0) return;\n        const randCell = emptyCells[Math.floor(Math.random() * emptyCells.length)];\n        const numberToSpawn = Math.random() < 0.1 ? (0, $19cfdf636c062450$export$df1fa4711fa5f9ac) : (0, $19cfdf636c062450$export$8ae71851ce4167cd);\n        this.board[randCell.row][randCell.col] = numberToSpawn;\n        this.newTile = randCell;\n        this.renderBoard();\n        this.newTile = null;\n    }\n    isGameOver() {\n        for(let row = 0; row < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05); row++)for(let col = 0; col < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05); col++){\n            if (this.board[row][col] === (0, $19cfdf636c062450$export$995d27d226b8d92c)) return \"win\";\n        }\n        for(let row = 0; row < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05); row++)for(let col = 0; col < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05); col++){\n            if (this.board[row][col] === 0) return \"playing\";\n            if (col < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05) - 1 && this.board[row][col] === this.board[row][col + 1]) return \"playing\";\n            if (row < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05) - 1 && this.board[row][col] === this.board[row + 1][col]) return \"playing\";\n        }\n        return \"lose\";\n    }\n    boardsAreEqual(board1, board2) {\n        for(let i = 0; i < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05); i++)for(let j = 0; j < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05); j++){\n            if (board1[i][j] !== board2[i][j]) return false;\n        }\n        return true;\n    }\n    moveLeft() {\n        const prevBoard = JSON.parse(JSON.stringify(this.board));\n        for(let i = 0; i < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05); i++){\n            let row = this.board[i];\n            row = this.filterZero(row);\n            for(let j = 0; j < row.length - 1; j++)if (row[j] === row[j + 1]) {\n                row[j] *= 2;\n                row[j + 1] = 0;\n                this.score += row[j];\n                this.mergedTiles.push({\n                    row: i,\n                    col: j\n                });\n            }\n            row = this.filterZero(row);\n            while(row.length < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05))row.push(0);\n            this.board[i] = row;\n        }\n        this.renderBoard();\n        if (!this.boardsAreEqual(prevBoard, this.board)) this.spawnNumber();\n        this.checkGameStatus();\n    }\n    moveRight() {\n        const prevBoard = JSON.parse(JSON.stringify(this.board));\n        for(let i = 0; i < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05); i++){\n            let row = this.board[i].reverse();\n            row = this.filterZero(row);\n            for(let j = 0; j < row.length - 1; j++)if (row[j] === row[j + 1]) {\n                row[j] *= 2;\n                row[j + 1] = 0;\n                this.score += row[j];\n                this.mergedTiles.push({\n                    row: i,\n                    col: 3 - j\n                });\n            }\n            row = this.filterZero(row);\n            while(row.length < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05))row.push(0);\n            this.board[i] = row.reverse();\n        }\n        this.renderBoard();\n        if (!this.boardsAreEqual(prevBoard, this.board)) this.spawnNumber();\n        this.checkGameStatus();\n    }\n    moveUp() {\n        const prevBoard = JSON.parse(JSON.stringify(this.board));\n        this.mergedTiles = [];\n        for(let col = 0; col < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05); col++){\n            let column = [];\n            for(let row = 0; row < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05); row++)column.push(this.board[row][col]);\n            column = this.filterZero(column);\n            for(let i = 0; i < column.length - 1; i++)if (column[i] === column[i + 1]) {\n                column[i] *= 2;\n                column[i + 1] = 0;\n                this.score += column[i];\n                this.mergedTiles.push({\n                    row: i,\n                    col: col\n                });\n            }\n            column = this.filterZero(column);\n            while(column.length < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05))column.push(0);\n            for(let row = 0; row < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05); row++)this.board[row][col] = column[row];\n        }\n        this.renderBoard();\n        if (!this.boardsAreEqual(prevBoard, this.board)) this.spawnNumber();\n        this.checkGameStatus();\n    }\n    moveDown() {\n        const prevBoard = JSON.parse(JSON.stringify(this.board));\n        this.mergedTiles = [];\n        for(let col = 0; col < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05); col++){\n            let column = [];\n            for(let row = 0; row < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05); row++)column.push(this.board[row][col]);\n            column = this.filterZero(column);\n            column.reverse();\n            for(let i = 0; i < column.length - 1; i++)if (column[i] === column[i + 1]) {\n                column[i] *= 2;\n                column[i + 1] = 0;\n                this.score += column[i];\n                this.mergedTiles.push({\n                    row: 3 - i,\n                    col: col\n                });\n            }\n            column = this.filterZero(column);\n            while(column.length < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05))column.push(0);\n            column.reverse();\n            for(let row = 0; row < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05); row++)this.board[row][col] = column[row];\n        }\n        this.renderBoard();\n        if (!this.boardsAreEqual(prevBoard, this.board)) this.spawnNumber();\n        this.checkGameStatus();\n    }\n    getScore() {\n        return this.score;\n    }\n    getState() {\n        return this.board;\n    }\n    getStatus() {\n        const messageContainer = document.querySelector(\".message-container\");\n        const visibleMessage = messageContainer.querySelector(\"p:not(.hidden)\");\n        if (visibleMessage) {\n            if (visibleMessage.classList.contains(\"message-start\")) return \"idle\";\n            if (visibleMessage.classList.contains(\"message-win\")) return \"win\";\n            if (visibleMessage.classList.contains(\"message-lose\")) return \"lose\";\n        } else return `playing`;\n    }\n    checkGameStatus() {\n        const curStatus = this.isGameOver();\n        if (curStatus === \"win\" || curStatus === \"lose\") this.showMessage(curStatus);\n    }\n    showMessage(type) {\n        const message = document.querySelector(`.message.message-${type}`);\n        message.classList.remove(\"hidden\");\n        document.removeEventListener(\"keydown\", this.boundKeyDown);\n    }\n    start() {\n        this.initBoard();\n        this.spawnNumber();\n        this.spawnNumber();\n        const footerMessage = document.querySelectorAll(\".message\");\n        footerMessage.forEach((element)=>element.classList.add(\"hidden\"));\n        this.boundKeyDown = this.keyDown.bind(this);\n        document.addEventListener(\"keydown\", this.boundKeyDown);\n    }\n    restart() {\n        for(let row = 0; row < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05); row++)for(let col = 0; col < (0, $19cfdf636c062450$export$23a7ffc9cfbefc05); col++){\n            this.board[row][col] = 0;\n            const cell = this.cells[row][col];\n            cell.textContent = \"\";\n            cell.className = \"field-cell\";\n        }\n        document.querySelector(\".message.message-lose\")?.classList.add(\"hidden\");\n        document.querySelector(\".message.message-win\")?.classList.add(\"hidden\");\n        document.querySelector(\".message.message-start\")?.classList.add(\"hidden\");\n        document.removeEventListener(\"keydown\", this.boundKeyDown);\n        this.newTile = null;\n        this.score = 0;\n        this.renderBoard();\n        this.spawnNumber();\n        this.spawnNumber();\n        this.boundKeyDown = this.keyDown.bind(this);\n        document.addEventListener(\"keydown\", this.boundKeyDown);\n    }\n    keyDown(e) {\n        e.preventDefault();\n        switch(e.key){\n            case \"ArrowUp\":\n                this.moveUp();\n                break;\n            case \"ArrowDown\":\n                this.moveDown();\n                break;\n            case \"ArrowLeft\":\n                this.moveLeft();\n                break;\n            case \"ArrowRight\":\n                this.moveRight();\n                break;\n        }\n        this.checkGameStatus();\n    }\n}\nvar $a5fd07fa01589658$export$2e2bcd8739ae039 = $a5fd07fa01589658$var$Game;\n\n\n\"use strict\";\nconst $09e991522ca7e64e$var$game = new (0, $a5fd07fa01589658$export$2e2bcd8739ae039)();\nconst $09e991522ca7e64e$var$startButton = document.querySelector(\"button.start\");\n$09e991522ca7e64e$var$startButton.addEventListener(\"click\", ()=>{\n    if ($09e991522ca7e64e$var$game.getStatus() === \"idle\") {\n        $09e991522ca7e64e$var$startButton.classList.remove(\"start\");\n        $09e991522ca7e64e$var$startButton.classList.add(\"restart\");\n        $09e991522ca7e64e$var$startButton.textContent = \"Restart\";\n        $09e991522ca7e64e$var$game.start();\n    } else {\n        $09e991522ca7e64e$var$startButton.classList.remove(\"start\");\n        $09e991522ca7e64e$var$startButton.classList.add(\"restart\");\n        $09e991522ca7e64e$var$startButton.textContent = \"Restart\";\n        $09e991522ca7e64e$var$game.restart();\n    }\n});\n\n\n//# sourceMappingURL=2048-game.1cb1cba3.js.map\n","\"use strict\";\n\nimport Game from \"../modules/Game.class.js\";\n\nconst game = new Game();\n\nconst startButton = document.querySelector(\"button.start\");\n\nstartButton.addEventListener(\"click\", () => {\n  if (game.getStatus() === \"idle\") {\n    startButton.classList.remove(\"start\");\n    startButton.classList.add(\"restart\");\n    startButton.textContent = \"Restart\";\n    game.start();\n  } else {\n    startButton.classList.remove(\"start\");\n    startButton.classList.add(\"restart\");\n    startButton.textContent = \"Restart\";\n    game.restart();\n  }\n});\n","\"use strict\";\nimport {\n  BOARD_SIZE,\n  INITIAL_TILES,\n  RARE_INITIAL_TILES,\n  WIN_VALUE,\n  MATRIX,\n} from \"../constants/game.config.js\";\n\nclass Game {\n  constructor(initialState = MATRIX) {\n    this.board = initialState;\n    this.score = 0;\n    this.newTile = null;\n    this.mergedTiles = [];\n\n    this.field = document.querySelector(\".game-field\");\n\n    if (!this.field) {\n      throw new Error(\"Не знайдено елемент .game-field в DOM!\");\n    }\n\n    this.initBoard();\n    this.renderBoard();\n  }\n\n  filterZero(row) {\n    return row.filter((num) => num !== 0);\n  }\n\n  initBoard() {\n    this.cells = [];\n    this.field.innerHTML = \"\";\n\n    for (let row = 0; row < BOARD_SIZE; row++) {\n      this.cells[row] = [];\n\n      for (let col = 0; col < BOARD_SIZE; col++) {\n        const cell = document.createElement(\"div\");\n\n        cell.classList.add(\"field-cell\");\n        this.field.appendChild(cell);\n        this.cells[row][col] = cell;\n      }\n    }\n  }\n\n  renderBoard() {\n    for (let row = 0; row < BOARD_SIZE; row++) {\n      for (let col = 0; col < BOARD_SIZE; col++) {\n        const cell = this.cells[row][col];\n        const value = this.board[row][col];\n\n        cell.textContent = value || \"\";\n        cell.className = `field-cell${value ? ` field-cell--${value}` : \"\"}`;\n\n        if (\n          this.newTile &&\n          this.newTile.row === row &&\n          this.newTile.col === col\n        ) {\n          cell.classList.add(\"field-cell--new\");\n\n          cell.addEventListener(\n            \"animationend\",\n            () => cell.classList.remove(\"field-cell--new\"),\n            { once: true },\n          );\n        }\n      }\n    }\n\n    const scoreEl = document.querySelector(\".game-score\");\n\n    if (scoreEl) {\n      scoreEl.textContent = String(this.score);\n    }\n  }\n\n  spawnNumber() {\n    const emptyCells = [];\n\n    for (let row = 0; row < BOARD_SIZE; row++) {\n      for (let col = 0; col < BOARD_SIZE; col++) {\n        if (this.board[row][col] === 0) {\n          emptyCells.push({ row, col });\n        }\n      }\n    }\n\n    if (emptyCells.length === 0) {\n      return;\n    }\n\n    const randCell = emptyCells[Math.floor(Math.random() * emptyCells.length)];\n    const numberToSpawn =\n      Math.random() < 0.1 ? RARE_INITIAL_TILES : INITIAL_TILES;\n\n    this.board[randCell.row][randCell.col] = numberToSpawn;\n    this.newTile = randCell;\n    this.renderBoard();\n    this.newTile = null;\n  }\n\n  isGameOver() {\n    for (let row = 0; row < BOARD_SIZE; row++) {\n      for (let col = 0; col < BOARD_SIZE; col++) {\n        if (this.board[row][col] === WIN_VALUE) {\n          return \"win\";\n        }\n      }\n    }\n\n    for (let row = 0; row < BOARD_SIZE; row++) {\n      for (let col = 0; col < BOARD_SIZE; col++) {\n        if (this.board[row][col] === 0) {\n          return \"playing\";\n        }\n\n        if (\n          col < BOARD_SIZE - 1 &&\n          this.board[row][col] === this.board[row][col + 1]\n        ) {\n          return \"playing\";\n        }\n\n        if (\n          row < BOARD_SIZE - 1 &&\n          this.board[row][col] === this.board[row + 1][col]\n        ) {\n          return \"playing\";\n        }\n      }\n    }\n\n    return \"lose\";\n  }\n\n  boardsAreEqual(board1, board2) {\n    for (let i = 0; i < BOARD_SIZE; i++) {\n      for (let j = 0; j < BOARD_SIZE; j++) {\n        if (board1[i][j] !== board2[i][j]) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  }\n\n  moveLeft() {\n    const prevBoard = JSON.parse(JSON.stringify(this.board));\n\n    for (let i = 0; i < BOARD_SIZE; i++) {\n      let row = this.board[i];\n\n      row = this.filterZero(row);\n\n      for (let j = 0; j < row.length - 1; j++) {\n        if (row[j] === row[j + 1]) {\n          row[j] *= 2;\n          row[j + 1] = 0;\n          this.score += row[j];\n          this.mergedTiles.push({ row: i, col: j });\n        }\n      }\n      row = this.filterZero(row);\n\n      while (row.length < BOARD_SIZE) {\n        row.push(0);\n      }\n      this.board[i] = row;\n    }\n    this.renderBoard();\n\n    if (!this.boardsAreEqual(prevBoard, this.board)) {\n      this.spawnNumber();\n    }\n    this.checkGameStatus();\n  }\n\n  moveRight() {\n    const prevBoard = JSON.parse(JSON.stringify(this.board));\n\n    for (let i = 0; i < BOARD_SIZE; i++) {\n      let row = this.board[i].reverse();\n\n      row = this.filterZero(row);\n\n      for (let j = 0; j < row.length - 1; j++) {\n        if (row[j] === row[j + 1]) {\n          row[j] *= 2;\n          row[j + 1] = 0;\n          this.score += row[j];\n\n          this.mergedTiles.push({\n            row: i,\n            col: 3 - j,\n          });\n        }\n      }\n      row = this.filterZero(row);\n\n      while (row.length < BOARD_SIZE) {\n        row.push(0);\n      }\n      this.board[i] = row.reverse();\n    }\n    this.renderBoard();\n\n    if (!this.boardsAreEqual(prevBoard, this.board)) {\n      this.spawnNumber();\n    }\n    this.checkGameStatus();\n  }\n\n  moveUp() {\n    const prevBoard = JSON.parse(JSON.stringify(this.board));\n\n    this.mergedTiles = [];\n\n    for (let col = 0; col < BOARD_SIZE; col++) {\n      let column = [];\n\n      for (let row = 0; row < BOARD_SIZE; row++) {\n        column.push(this.board[row][col]);\n      }\n\n      column = this.filterZero(column);\n\n      for (let i = 0; i < column.length - 1; i++) {\n        if (column[i] === column[i + 1]) {\n          column[i] *= 2;\n          column[i + 1] = 0;\n          this.score += column[i];\n\n          this.mergedTiles.push({\n            row: i,\n            col: col,\n          });\n        }\n      }\n\n      column = this.filterZero(column);\n\n      while (column.length < BOARD_SIZE) {\n        column.push(0);\n      }\n\n      for (let row = 0; row < BOARD_SIZE; row++) {\n        this.board[row][col] = column[row];\n      }\n    }\n\n    this.renderBoard();\n\n    if (!this.boardsAreEqual(prevBoard, this.board)) {\n      this.spawnNumber();\n    }\n\n    this.checkGameStatus();\n  }\n\n  moveDown() {\n    const prevBoard = JSON.parse(JSON.stringify(this.board));\n\n    this.mergedTiles = [];\n\n    for (let col = 0; col < BOARD_SIZE; col++) {\n      let column = [];\n\n      for (let row = 0; row < BOARD_SIZE; row++) {\n        column.push(this.board[row][col]);\n      }\n\n      column = this.filterZero(column);\n      column.reverse();\n\n      for (let i = 0; i < column.length - 1; i++) {\n        if (column[i] === column[i + 1]) {\n          column[i] *= 2;\n          column[i + 1] = 0;\n          this.score += column[i];\n\n          this.mergedTiles.push({\n            row: 3 - i,\n            col: col,\n          });\n        }\n      }\n\n      column = this.filterZero(column);\n\n      while (column.length < BOARD_SIZE) {\n        column.push(0);\n      }\n\n      column.reverse();\n\n      for (let row = 0; row < BOARD_SIZE; row++) {\n        this.board[row][col] = column[row];\n      }\n    }\n\n    this.renderBoard();\n\n    if (!this.boardsAreEqual(prevBoard, this.board)) {\n      this.spawnNumber();\n    }\n\n    this.checkGameStatus();\n  }\n\n  getScore() {\n    return this.score;\n  }\n\n  getState() {\n    return this.board;\n  }\n\n  getStatus() {\n    const messageContainer = document.querySelector(\".message-container\");\n    const visibleMessage = messageContainer.querySelector(\"p:not(.hidden)\");\n\n    if (visibleMessage) {\n      if (visibleMessage.classList.contains(\"message-start\")) {\n        return \"idle\";\n      }\n\n      if (visibleMessage.classList.contains(\"message-win\")) {\n        return \"win\";\n      }\n\n      if (visibleMessage.classList.contains(\"message-lose\")) {\n        return \"lose\";\n      }\n    } else {\n      return `playing`;\n    }\n  }\n\n  checkGameStatus() {\n    const curStatus = this.isGameOver();\n\n    if (curStatus === \"win\" || curStatus === \"lose\") {\n      this.showMessage(curStatus);\n    }\n  }\n\n  showMessage(type) {\n    const message = document.querySelector(`.message.message-${type}`);\n\n    message.classList.remove(\"hidden\");\n    document.removeEventListener(\"keydown\", this.boundKeyDown);\n  }\n\n  start() {\n    this.initBoard();\n\n    this.spawnNumber();\n    this.spawnNumber();\n\n    const footerMessage = document.querySelectorAll(\".message\");\n\n    footerMessage.forEach((element) => element.classList.add(\"hidden\"));\n\n    this.boundKeyDown = this.keyDown.bind(this);\n    document.addEventListener(\"keydown\", this.boundKeyDown);\n  }\n\n  restart() {\n    for (let row = 0; row < BOARD_SIZE; row++) {\n      for (let col = 0; col < BOARD_SIZE; col++) {\n        this.board[row][col] = 0;\n\n        const cell = this.cells[row][col];\n\n        cell.textContent = \"\";\n        cell.className = \"field-cell\";\n      }\n    }\n\n    document.querySelector(\".message.message-lose\")?.classList.add(\"hidden\");\n    document.querySelector(\".message.message-win\")?.classList.add(\"hidden\");\n    document.querySelector(\".message.message-start\")?.classList.add(\"hidden\");\n    document.removeEventListener(\"keydown\", this.boundKeyDown);\n\n    this.newTile = null;\n    this.score = 0;\n    this.renderBoard();\n    this.spawnNumber();\n    this.spawnNumber();\n    this.boundKeyDown = this.keyDown.bind(this);\n    document.addEventListener(\"keydown\", this.boundKeyDown);\n  }\n\n  keyDown(e) {\n    e.preventDefault();\n\n    switch (e.key) {\n      case \"ArrowUp\":\n        this.moveUp();\n        break;\n      case \"ArrowDown\":\n        this.moveDown();\n        break;\n      case \"ArrowLeft\":\n        this.moveLeft();\n        break;\n      case \"ArrowRight\":\n        this.moveRight();\n        break;\n    }\n    this.checkGameStatus();\n  }\n}\n\nexport default Game;\n","export const BOARD_SIZE = 4;\nexport const INITIAL_TILES = 2;\nexport const RARE_INITIAL_TILES = 2;\nexport const START_VALUE = 2;\nexport const WIN_VALUE = 2048;\nexport const MATRIX = [\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n];\n"],"names":["$19cfdf636c062450$export$6ea81d70350bed43","$09e991522ca7e64e$var$game","initialState","board","score","newTile","mergedTiles","field","document","querySelector","Error","initBoard","renderBoard","filterZero","row","filter","num","cells","innerHTML","col","cell","createElement","classList","add","appendChild","value","textContent","className","addEventListener","remove","once","scoreEl","String","spawnNumber","emptyCells","push","length","randCell","Math","floor","random","isGameOver","boardsAreEqual","board1","board2","i","j","moveLeft","prevBoard","JSON","parse","stringify","checkGameStatus","moveRight","reverse","moveUp","column","moveDown","getScore","getState","getStatus","visibleMessage","messageContainer","contains","curStatus","showMessage","type","message","removeEventListener","boundKeyDown","start","footerMessage","querySelectorAll","forEach","element","keyDown","bind","restart","e","preventDefault","key","$09e991522ca7e64e$var$startButton"],"version":3,"file":"2048-game.1cb1cba3.js.map"}